-- Crear tabla PERMISO
CREATE TABLE PERMISO (
    ID_PERMISO INTEGER NOT NULL,
    PERMISO TEXT NOT NULL,
    PRIMARY KEY (ID_PERMISO)
);

-- Insertar datos en la tabla PERMISO
INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (1, 'ALTA');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (2, 'BAJA');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (3, 'MODIFICACION');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (4, 'INICIAR SESION');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (5, 'VER');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (100, 'INVITADOS');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (101, 'USUARIOS');

INSERT INTO
    PERMISO (ID_PERMISO, PERMISO)
VALUES
    (102, 'ADMINISTRADORES');

-- Crear tabla USUARIO
CREATE TABLE USUARIO (
    Id INTEGER NOT NULL,
    nombre TEXT NOT NULL,
    PRIMARY KEY (Id)
);

-- Insertar datos en la tabla USUARIO
INSERT INTO
    USUARIO (Id, nombre)
VALUES
    (1, 'a');

INSERT INTO
    USUARIO (Id, nombre)
VALUES
    (2, 'b');

INSERT INTO
    USUARIO (Id, nombre)
VALUES
    (3, 'c');

-- Crear tabla GRUPO
CREATE TABLE GRUPO (
    ID_GRUPO INTEGER NOT NULL,
    ID_HIJO INTEGER NOT NULL,
    PRIMARY KEY (ID_GRUPO, ID_HIJO),
    FOREIGN KEY (ID_GRUPO) REFERENCES PERMISO(ID_PERMISO),
    FOREIGN KEY (ID_HIJO) REFERENCES PERMISO(ID_PERMISO)
);

-- Insertar datos en la tabla GRUPO
INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (100, 5);

INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (101, 4);

INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (101, 100);

INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (102, 1);

INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (102, 2);

INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (102, 3);

INSERT INTO
    GRUPO (ID_GRUPO, ID_HIJO)
VALUES
    (102, 101);

-- Crear tabla USUARIO_PERMISO
CREATE TABLE USUARIO_PERMISO (
    ID_USUARIO INTEGER NOT NULL,
    ID_PERMISO INTEGER NOT NULL,
    PRIMARY KEY (ID_USUARIO, ID_PERMISO),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(Id),
    FOREIGN KEY (ID_PERMISO) REFERENCES PERMISO(ID_PERMISO)
);

-- Insertar datos en la tabla USUARIO_PERMISO
INSERT INTO
    USUARIO_PERMISO (ID_USUARIO, ID_PERMISO)
VALUES
    (1, 100);

INSERT INTO
    USUARIO_PERMISO (ID_USUARIO, ID_PERMISO)
VALUES
    (2, 101);

INSERT INTO
    USUARIO_PERMISO (ID_USUARIO, ID_PERMISO)
VALUES
    (3, 102);

-- Crear procedimiento almacenado USUARIO_PERMISO_LISTAR
CREATE TABLE IF NOT EXISTS USUARIO_PERMISO_LISTAR (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_USUARIO INTEGER,
    ID_PERMISO INTEGER
);

-- Crear procedimiento almacenado PERMISO_LISTAR
CREATE TABLE IF NOT EXISTS PERMISO_LISTAR (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_PERMISO INTEGER,
    PERMISO TEXT,
    TIPO TEXT
);

-- Crear procedimiento almacenado GRUPO_LISTAR
CREATE TABLE IF NOT EXISTS GRUPO_LISTAR (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    ID_GRUPO INTEGER,
    ID_PERMISO INTEGER,
    PERMISO TEXT
);